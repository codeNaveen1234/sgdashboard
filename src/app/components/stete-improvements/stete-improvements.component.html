<div class="landing-container">
  <!-- Breadcrumb -->
  <div class="breadcrumb">
    <a [routerLink]="['/dashboard']">Dashboard</a> / <span>{{ stateName }}</span>
    @if(pageConfig.type == "communityDetails"){
      <span> / Community Led Improvements-</span> <span>{{ stateName }}</span>
    }
  </div>
    <div *ngFor="let section of pageData.sections" [style.width]="section.width" [ngClass]="'section-position-' + section.position">
      <!-- Main Section -->
      <ng-container *ngIf="section.type === 'dashboard-main'">
        <section [ngClass]="section.styles.section">
          <div class="dashboard-main-container">
            <h3 class="">{{ section.header }}</h3>
            <h4 class="">{{ section.subHeader }}</h4>
            <p class="">{{ section.description }}</p>
          </div>
        </section>
      </ng-container>

      <!-- Main Section -->
      <ng-container *ngIf="section.type === 'dashboard-metrics'">
        <section [ngClass]="section.styles.section" class="metrics-container">
          <div class="dashboard-container">
            <h3 class="">{{ section.header }}</h3>
            <h4 class="">{{ section.subHeader }}</h4>
            <div class="dashboard-indicator">
              <div *ngFor="let item of section.indicators">
                <h4>{{item.value}}</h4>
                <p>{{item.label}}</p>
              </div>
            </div>
          </div>
        </section>
      </ng-container>

      <!-- CTA Section -->
      <ng-container *ngIf="section.type === 'cta'">
        <section [ngClass]="section.styles.section">
          <div *ngFor="let card of section.cards" [ngClass]="section.styles.card">
            <h3>{{ card.title }}</h3>
            <p>{{ card.text }}</p>
            <a [routerLink]="card.button.link" [ngClass]="section.styles.button">{{ card.button.text }}</a>
          </div>
        </section>
      </ng-container>

      <!-- Partner Logos Section -->
      <!-- <ng-container *ngIf="section.type === 'country-view'">
        <app-country-view [showVariations]="section.showVariations" [showDetails]="section.showDetails" [legends]="section.legends" [selections]="section.selections"></app-country-view>
      </ng-container> -->

      <!-- app-state-view -->
      <ng-container *ngIf="section.type === 'state-view'">
        <app-state-view [showVariations]="section.showVariations" [showDetails]="section.showDetails" [selections]="section.selections"
        [selectedState]="stateName" [legends]="section.legends" [path]="section.path" [replaceCode] = "stateCode" [notes]="section.notes" [pageConfig]="pageConfig"></app-state-view>
      </ng-container>

      <!-- Data Indicators Section -->
      <ng-container *ngIf="section.type === 'data-indicators'">
        <section [ngClass]="section.styles.section">
          <div class="container">
            <h2 [ngClass]="section.styles.title">{{ section.title }}</h2>
            <div [ngClass]="section.styles.grid">
              <app-indicator-card
                *ngFor="let indicator of section.indicators; let i = index"
                [value]="indicator.value"
                [label]="indicator.label"
                [icon]="indicator.icon"
                [style.--animation-delay.s]="i * 0.1"
              ></app-indicator-card>
            </div>
          </div>
        </section>
      </ng-container>

      <ng-container *ngIf="section.type === 'programs-list' && programsList.length > 0" class="program-list">
        <app-programs-report-list [headerText]="section.title" [CommunityButton]="false" [programs]="programsList"></app-programs-report-list>
      </ng-container>

      <!-- Partner Logos Section -->
      <ng-container *ngIf="section.type === 'partner-logos'">
        <app-partner-logos [partners]="section.partners" [styles]="section.styles" [title]="section.title"></app-partner-logos>
      </ng-container>

      <!-- Carousel Section -->
      <ng-container *ngIf="section.type === 'carousel'">
        <app-carousel [slides]="section.slides" [styles]="section.styles" [title]="section.title"></app-carousel>
      </ng-container>

      <ng-container *ngIf="section.type === 'line-chart'">
        <app-line-chart [allData]="section.data"></app-line-chart>
      </ng-container>

      <ng-container *ngIf="section.type === 'pie-chart'">
        <app-pie-chart [pieData]="section.data" [path]="section.path" [replaceCode] = "stateCode"></app-pie-chart>
      </ng-container>

      <ng-container *ngIf="section.type === 'state-metrics'">
        <app-metrics-list [data]="section.data" [path]="section.path" [replaceCode] = "stateCode"></app-metrics-list>
      </ng-container>
    </div>
  </div>
